# NoticeCardUsageHistory

前日のカードの使用履歴をLINEに通知します。

本ソースコードは三菱UFJデビッドカード専用です。その他のカードで利用したい場合はご自身で適切に修正を加えてください。

## 仕様

- SetTrigger() : 次の日の0時1分にGetEmailOnDay()を実行するトリガーを作成する
- DeleteTrigger() : GetEmailOnDay()を実行するトリガーを全て削除する
- GetEmailOnDay() : 前日の0時0分と前日の23時59分の時間データを取得し、GetEmail()に引数として時間データを渡し実行する
- GetEmail() : GetEmailOnDay()から渡された時間内のメール(Gmail)かつカード会社のメールアドレスから送られたメールのみ取得、メッセージを作成しNoticeToLINE()にメッセージを渡し実行する
- NoticeToLINE() : GetEmail()から渡されたメッセージをLINE Notifyで送信する

## 共通

カードの使用通知が届くメールアドレスのGoogleアカウントでプロジェクトを作成してください。

72行目にLINE Notifyのアクセストークンを[こちら](https://notify-bot.line.me/ja/)から発行してください。  
1. "ログイン" をクリック
2. メールアドレスとパスワードを入力しログイン
3. (PCの場合)右上のユーザー名をクリックし"マイページ"をクリック
4. "トークンを発行する" をクリック
5. トークン名を20文字以内で入力
6. "1:1でLINE Notifyから通知を受け取る" をクリック
7. "発行する" をクリック
8. "コピー" をクリックしてソースコードの72行目に貼り付ける

## その他のカード

31行目から記述されているGetEmail内の処理を変更してください。主に51行目から56行目です。
